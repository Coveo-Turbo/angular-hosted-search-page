# Angular Hosted Search Page Sample

Disclaimer: This sample code was built by the community at large and is not an official Coveo JSUI distribution. Use this code at your own risk.

The Angular Hosted Search page sample leverages the [@coveops/hosted-search-page](https://github.com/Coveo-Turbo/hosted-search-page) component to inject a classic search page built with the JSUI and hosted within Coveo's APIs into an Angular application - adapted to address conflicts between the JSUI implementation and Angular's component routing.

## Getting Started

1. Install NodeJS version 18 or higher.
2. Install the project using `npm install`
3. Copy the `.env.dist` to `.env`
4. Update the values within the `.env` in accordance to the Coveo organization it should be linked to.

- `NG_APP_ORG_ID`: The organization ID
- `NG_APP_PAGE_ID`: The id of the search page created in the Coveo Platform
- `NG_APP_API_KEY`: An API key with exclusive permissions to see search pages in the Coveo API.
- `NG_APP_TOKEN`: A JWT token generated by the backend of the application via an API key that has exclusive permissions to perform searches for the search hub of the search interface.
- `NG_APP_SEARCH_HUB`: The search hub value used to identify this search interface and map it to a query pipeline.
- `NG_APP_IS_PRODUCTION`: Boolean value denoting if the environment is a production environment.

5. Run `npm start`. The search interface will be available at [`http://localhost:4200/`](http://localhost:4200/)

## Usage

Copy the `coveo-search` component, in the `src/app/main/coveo` folder, into your project or fork this project as a starting point and build off it.

Usage of the `coveo-search` component in another component's markup:

```html
<coveo-search [context]="context" [searchHub]="searchHub"></coveo-search>
```

* `context` is a JSON object containing key-value pairs of metadata meant to be sent to Coveo with the search request as a context.
* `searchHub` is a string value that identifies the search hub of a given user interface.

The `main` component in `app/main` will show a very basic integration of the `coveo-search` component where an empty context is passed and the search hub specified in the `.env` file is passed. Within your application, the context can be driven by properties or other components that are interacting with the search interface accordingly.

## Notes

* To access the Angular application at any time, you can reference `./node_modules/.bin/ng` when you'd use `ng` if Angular was installed globally. Note that on Windows the file path needs to be adapted.

* It is recommended to wrap the `coveo-search` component in the `app/main/coveo` folder in a wrapper component if the changes are meant to be customization. This way, if updates are made to the component in this repository, they can easily be synced to your project.

* The Coveo JSUI mounts to the root `div` element from the search page, not the root hosted search page element.

* The `coveo-search` component will use the local storage to persist the JSUI's state and any changes will be adapted and initialized from the url per the implementation in the `coveo-search` component to replicate the out of the box behavior.